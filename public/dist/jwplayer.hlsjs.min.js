!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jwplayer_hls_provider=e()}(function(){return function i(r,s,o){function a(t,e){if(!s[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=s[t]={exports:{}},r[t][0].call(n.exports,function(e){return a(r[t][1][e]||e)},n,n.exports,i,r,s,o)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,f="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");n=new s(n,i||e,r),i=f?f+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],n]:e._events[i].push(n):(e._events[i]=n,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(f=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)i.call(e,t)&&n.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var e=f?f+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,i=t.length,r=new Array(i);n<i;n++)r[n]=t[n].fn;return r},a.prototype.listenerCount=function(e){e=f?f+e:e,e=this._events[e];return e?e.fn?1:e.length:0},a.prototype.emit=function(e,t,n,i,r,s){var o=f?f+e:e;if(!this._events[o])return!1;var a,l=this._events[o],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,r),!0;case 6:return l.fn.call(l.context,t,n,i,r,s),!0}for(h=1,a=new Array(u-1);h<u;h++)a[h-1]=arguments[h];l.fn.apply(l.context,a)}else for(var c,d=l.length,h=0;h<d;h++)switch(l[h].once&&this.removeListener(e,l[h].fn,void 0,!0),u){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,t);break;case 3:l[h].fn.call(l[h].context,t,n);break;case 4:l[h].fn.call(l[h].context,t,n,i);break;default:if(!a)for(c=1,a=new Array(u-1);c<u;c++)a[c-1]=arguments[c];l[h].fn.apply(l[h].context,a)}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,n,i){e=f?f+e:e;if(!this._events[e])return this;if(!t)return l(this,e),this;var r=this._events[e];if(r.fn)r.fn!==t||i&&!r.once||n&&r.context!==n||l(this,e);else{for(var s=0,o=[],a=r.length;s<a;s++)(r[s].fn!==t||i&&!r[s].once||n&&r[s].context!==n)&&o.push(r[s]);o.length?this._events[e]=1===o.length?o[0]:o:l(this,e)}return this},a.prototype.removeAllListeners=function(e){return e?(e=f?f+e:e,this._events[e]&&l(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=f,a.EventEmitter=a,void 0!==t&&(t.exports=a)},{}],2:[function(e,t,n){"use strict";var Y=e("eventemitter3"),C=t.exports=function(e,t,n){var i=C.jwplayer||window.jwplayer,s=C.Hls||window.Hls,i=e&&i(e);function r(){return function(){}}console.log("init hola/hls provider v"+C.VERSION+" hls v"+s.version+(C.version?" hap v"+C.version:""));var o=i.provider=this;function a(t){function n(e){t.removeEventListener("playing",n),t.removeEventListener("pause",n),t.removeEventListener("abort",n),t.removeEventListener("error",n),"playing"!=e.type&&u('play() was interrupted by a "'+e.type+'" event')}t.paused?u("video play refused"):(t.addEventListener("playing",n),t.addEventListener("abort",n),t.addEventListener("error",n),t.addEventListener("pause",n))}function l(){var e=f.play()||a(f);e&&e.catch?e.catch(function(e){u("video_play failed with "+e),console.warn(e),"NotAllowedError"==e.name&&f.hasAttribute("jw-gesture-required")&&(o.trigger("autoplayFailed"),f.setAttribute("autoplay-failed","failed"))}):f.hasAttribute("jw-gesture-required")&&(o.trigger("autoplayFailed"),f.setAttribute("autoplay-failed","failed"))}function u(e){var t;(t=L.debug)&&t.log(e)}function c(){u("hls_play state: "+o.hls_state+" att:"+o.attached),!(o.hls_queued.play="ready"!=o.hls_state)&&o.attached&&(o.hls_restore_pos(),l())}this.hls_restore_pos=function(){var e=this.hls_queued.seek,t=f.currentTime;"STOPPED"==d.streamController.state&&(d.streamController.startPosition=0,d.startLoad(e||0)),e&&(this._in_seek=!0,f.currentTime=e,this.trigger(W.JWPLAYER_MEDIA_SEEK,{position:t,offset:e}),f.readyState||f.dispatchEvent(new Event("seeking")),this.hls_queued.seek=0)},this.events=new Y,this.addEventListener=this.on=this.events.on.bind(this.events),this.once=this.events.once.bind(this.events),this.removeEventListener=this.off=this.events.off.bind(this.events),this.trigger=this.emit=function(e){var t;(o.attached||o.before_complete)&&(t=[].slice.call(arguments),o.events.emit.apply(this.events,t),"all"!=e&&(t.unshift("all"),o.events.emit.apply(this.events,t)))},this.removeAllListeners=function(e){this.events.removeAllListeners(e)},this.hls_queued={play:!1,seek:0},this.attached=!0,this.hls_state="idle",this.is_mobile=function(){var e,t,n=navigator.userAgent;if((e=/iP(hone|ad|od)/i.test(n))||(t=/Android/i.test(n)))return{is_ios:e,is_android:t}},this.supports_captions=function(){var e=navigator.userAgent;return/(iPhone|iPad|iPod|iPod touch);.*?OS/.test(e)||/ (Chrome|Version)\/\d+(\.\d+)+.* Safari\/\d+(\.\d+)+/.test(e)||/Firefox\/(\d+(?:\.\d+)+)/.test(e)};var d,h,f=n;f||(n=document.getElementById(e),f=n?n.querySelector("video"):void 0);var v,_,p=this.is_mobile(),E={reason:"initial choice",mode:"auto"};f||(f=document.createElement("video"),p&&f.setAttribute("jw-gesture-required",""));(this.video=f).className="jw-video jw-reset",f.hola_dm_hls_attached=!0,function(n,t){for(var i,e=n;e&&!e.hasOwnProperty("src");e=Object.getPrototypeOf(e));e&&((i=Object.getOwnPropertyDescriptor(e,"src")).get||i.set||(i.get=function(){var e=n.getAttribute("src");return null!=e?e:""},i.set=function(e){var t=document.createElement("source");t.src=e||"",n.setAttribute("src",t.src)}),Object.defineProperty(n,"src",{configurable:!0,enumerable:!1,set:function(e){t(i.get.call(n),e)&&i.set.call(n,e)},get:i.get}))}(f,function(e,t){return t!=e+"?"});var g,A,m,y,L=C.hls_params||{};this.ad_count=0,i&&(i.on("captionsList",b),i.on("captionsChanged",b),i.on("adImpression",function(){o.ad_count++}),i.on("adComplete",function(){o.ad_count--}),i.on("adSkipped",function(){o.ad_count--}),Object.assign(L,i.hola_config),"undefined"!=L.debug&&(g=L.debug,delete L.debug));L.debug={},["debug","info","log","warn","error"].forEach(function(e){L.debug[e]=function(e,t){o.hls.holaLog&&o.hls.holaLog[e]&&o.hls.holaLog[e].call(o.hls.holaLog,t)}.bind(null,e)}),this.hls=d=new s(L),d.holaLog=g,i&&(i.hls=d);function b(e){if(o.renderNatively)for(var t=f.textTracks,n=e.tracks[e.track].id,i=0;i<t.length;i++)t[i].mode=t[i]._id==n?"showing":"hidden"}function w(){for(var e=f.seekable?f.seekable.length:0,t=0,n=0;n<e;n++)t=Math.max(t,f.seekable.end(n));return t}function R(){var e=f.duration,t=w();return e=e==1/0&&t&&(t=t-f.seekable.start(0))!=1/0&&120<t?-t:e}function M(){return function(){var e,t;try{if(!(t=d.streamController.levels))return;var n=t.find(function(e){return e.details});e=n&&!!n.details.live}catch(e){u("is_live failed with "+e)}return e}()?1/0:R()}function P(){var e=f.buffered,t=f.duration;return!e||!e.length||t<=0||t==1/0?0:Math.min(e.end(e.length-1)/t,1)}function D(e,t,n){e==A&&n==m||(A=e,o.trigger(W.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*e,position:t,duration:M()}))}function T(){o.setState("complete"),o.trigger(W.JWPLAYER_MEDIA_COMPLETE),o.before_complete=!1}var I,O={durationchange:function(){m=R(),D(P(),y,m)},ended:function(){"idle"!=o.state&&"complete"!=o.state&&(o.before_complete=!0,o.trigger(W.JWPLAYER_MEDIA_BEFORECOMPLETE),o.attached&&T())},error:function(){o.trigger(W.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: File could not be played"})},loadstart:function(){f.setAttribute("jw-loaded","started")},loadeddata:function(){f.setAttribute("jw-loaded","data"),o.supports_captions()&&(f.textTracks.onaddtrack=function(){o.renderNatively=!0,o.trigger("subtitlesTracks",{tracks:f.textTracks})},f.textTracks.length&&f.textTracks.onaddtrack(),o.trigger(W.JWPLAYER_MEDIA_TYPE,{mediaType:f.videoHeight?"video":"audio"}))},loadedmetadata:function(){f.muted&&(f.muted=!1,f.muted=!0),f.setAttribute("jw-loaded","meta"),m=R(),o.trigger(W.JWPLAYER_MEDIA_META,{duration:M(),height:f.videoHeight,width:f.videoWidth})},canplay:function(){_=!0,o.trigger(W.JWPLAYER_MEDIA_BUFFER_FULL)},playing:function(){o.setState("playing"),f.hasAttribute("jw-played")||f.setAttribute("jw-played",""),f.hasAttribute("jw-gesture-required")&&(f.removeAttribute("jw-gesture-required"),f.removeAttribute("autoplay-failed")),o.trigger(W.JWPLAYER_PROVIDER_FIRST_FRAME,{})},pause:function(){"complete"!=o.state&&f.currentTime!=f.duration&&o.setState("paused")},seeking:function(){o._in_seek||(o._in_seek=!0,o.trigger(W.JWPLAYER_MEDIA_SEEK,{position:y,offset:f.currentTime}))},seeked:function(){o._in_seek=!1,o.trigger(W.JWPLAYER_MEDIA_SEEKED)},progress:function(){D(P(),y,m)},timeupdate:function(){m=R(),y=m<0?-(w()-f.currentTime):f.currentTime,D(P(),y,m),"playing"==o.state&&o.trigger(W.JWPLAYER_MEDIA_TIME,{position:y,duration:M()})}};for(I in O)f.addEventListener(I,function(e){return function(){o.attached&&O[e]()}}(I),!1);function k(e){return e.height?e.height+"p":e.width?Math.round(9*e.width/16)+"p":e.bitrate?function(e){if(void 0===e)return"";if(!e)return"0";var t=Math.floor(Math.log(e)/Math.log(1024));return(e/=Math.pow(1024,t))<.001?"0":(e=1023<=e?Math.trunc(e):e).toFixed(e<1?3:e<10?2:e<100?1:0).replace(/\.0*$/,"")+["","K","M","G","T","P"][t]}(e.bitrate)+"bps":0}function j(){var e=d.levels||[],t=[];return 1<e.length&&t.push({label:"Auto"}),e.forEach(function(e){t.push({bitrate:e.bitrate,height:e.height,label:k(e),width:e.width})}),t}function S(e){var t=d.levels||[];return e=e||d.currentLevel,{jw:-1==d.manual_level||t.length<2?0:e+1,real:t.length<2?0:e+1}}d.on(s.Events.ERROR,function(e,t){if(t.fatal){var n;switch(t.details){case s.ErrorDetails.MANIFEST_LOAD_ERROR:case s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:n="Cannot load M3U8: "+t.response.statusText;break;default:n="Error loading media: "+t.details}o.trigger(W.JWPLAYER_MEDIA_ERROR,{message:n})}}),d.on(s.Events.MANIFEST_LOADED,function(){o.trigger(W.JWPLAYER_MEDIA_LEVELS,{currentQuality:S().jw,levels:j()})}),d.on(s.Events.LEVEL_SWITCHED,function(e,t){var n=j(),t=S(t.level),i=(o.trigger(W.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:t.jw,levels:n}),n[t.real]);E.level=i,E.level.index=t.real,E.level.label=-1==d.manual_level&&1<n.length?"auto":i.label,E.reason=E.reason||"auto",o.trigger("visualQuality",E),E.reason=""}),this.init=function(e){v=!1,f.setAttribute("jw-loaded","init")},this.load=function(e){var t,n,i,r;this.attached&&(t=((t=e.sources)&&t.find(function(e){return e.default})||t[0]).file,n=f.getAttribute("jw-loaded"),i=this.hls_queued,r=f.hasAttribute("jw-played"),p&&!r||this.setState("loading"),i.seek=Math.max(e.starttime-(i.rw_sec||0),0),"ready"!=this.hls_state||(this.source||"")!=t||["init","started"].includes(n)?(v=!1,f.load(),d.stopLoad(d.media&&"ready"==this.hls_state&&"init"==n),(e=this.source=t)&&("ready"==o.hls_state&&(o.hls_state="idle"),o.level_cb&&d.off(s.Events.LEVEL_LOADED,o.level_cb),o.level_cb=function(){u("hls play queued on level_cb:"+o.hls_queued.play),d.off(s.Events.LEVEL_LOADED,o.level_cb),o.level_cb=void 0,o.hls_state="ready",o.hls_queued.play&&c(),o.trigger(W.JWPLAYER_MEDIA_BUFFER_FULL)},d.on(s.Events.LEVEL_LOADED,o.level_cb),d.loadSource(e),d.media||o.attachMedia()),f.setAttribute("jw-loaded","init")):c(),p&&!r&&(v||p.is_ios&&!_||(_=!(v=!0),l()),f.paused||"playing"==this.state||this.setState("loading")))},this.play=function(){c()},this.pause=function(){f.pause(),o.setState("paused")},this.stop=function(){d.stopLoad(),o.setState("idle")},this.volume=function(e){f.volume=Math.min(e/100,1)},this.mute=function(e){f.muted=!!e},this.seek=function(e){var t;this._in_seek=!0,"ready"==this.hls_state?(t=f.currentTime,f.currentTime=e,this.trigger(W.JWPLAYER_MEDIA_SEEK,{position:t,offset:e})):this.hls_queued.seek=e},this.resize=function(e,t,n){},this.remove=function(){d.stopLoad(),this.source=void 0,h===f.parentNode&&h.removeChild(f)},this.destroy=function(){for(var e in O)f.removeEventListener(e,O[e],!1);this.removeAllListeners()},this.setVisibility=function(e){h.style.visibility=e?"visible":"",h.style.opacity=e?1:0},this.setFullscreen=function(){return!1},this.getFullscreen=r(),this.getContainer=function(){return h},this.setContainer=function(e){h=e,this.video.parentNode!==e&&h.appendChild(f)},d.manual_level=-1,this.setCurrentQuality=function(e){e!=d.manual_level+1&&(d.manual_level=e-1,d.hola_adaptive||(d.loadLevel=d.manual_level),o.trigger(W.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:e,levels:j()}),E.reason="api")},this.getName=function(){return{name:"hola/hls"}},this.get_position=function(){return f.currentTime},this.getQualityLevels=j,this.getCurrentQuality=function(){return S(d.loadLevel).jw},this.getAudioTracks=r(),this.getCurrentAudioTrack=r(),this.setCurrentAudioTrack=r(),this.checkComplete=function(){return!!this.before_complete},this.setControls=r(),this.attachMedia=function(){if(this.before_complete)return T();this.ad_count&&u("jwprovider attach inside ad "+this.ad_count),this.attached=!0,d.attachMedia(f)},this.detachMedia=function(){return d.trigger(s.Events.BUFFER_RESET),d.detachMedia(),this.level_cb&&(d.off(s.Events.LEVEL_LOADED,this.level_cb),this.level_cb=void 0),void 0!==d.bufferController&&delete d.bufferController.segments,this.attached=!1,f},this.setState=function(e){var t=this.state||"idle";(this.state=e)!=t&&this.trigger(W.JWPLAYER_PLAYER_STATE,{newstate:e})},this.sendMediaType=function(e){e=["oga","aac","mp3","mpeg","vorbis"].includes(e[0].type);this.trigger(W.JWPLAYER_MEDIA_TYPE,{mediaType:e?"audio":"video"})}},i=!1,W={JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_MEDIA_META:"meta",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame"};function r(){for(var e,t=C.jwplayer||window.jwplayer,n=0,i=[];(e=t(n++))&&e.pause;)i.push(e);return i}C.getName=function(){return{name:"hola/hls"}},C.supports=function(t){var e,n=C.Hls||window.Hls;return!r().every(function(e){e=e.getPlaylist();return(e.every?e:[{sources:[e]}]).every(function(e){return(e.allSources||e.sources||[{file:e.file}]).every(function(e){return e.file!=t.file})})})&&(!C.disabled&&("hls"==(e=t).type||(e.file||"").match(/\.m3u8$/))&&n&&n.isSupported())},C.attach=function(){var e=C.jwplayer||window.jwplayer;C.disabled=!1,i||(i=!0,e.api.registerProvider(this))},C.detach=function(e){C.disabled=!0,e&&e.attached&&(e.setState("idle"),e.detachMedia())},C.reload_jwplayer_instances=function(){r().forEach(function(e){var t=e.getConfig();if(t){if(t.advertising&&!t.advertising.client&&t.plugins)for(var n in t.plugins)if(t.plugins[n]===t.advertising){n=n.match(/\/(\w+)\.js$/);t.advertising.client=n&&n[1];break}e.setup(t)}})},C.VERSION="0.0.79"},{eventemitter3:1}]},{},[2])(2)});
//# sourceMappingURL=jwplayer.hlsjs.min.js.map